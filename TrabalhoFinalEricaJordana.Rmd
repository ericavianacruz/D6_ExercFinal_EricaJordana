---
title: "Trabalho Final "
author: "Erica Jordana "
date: "18 de Outubro de 2018"
output: html_document
---

```{r setup, include=FALSE}
library("knitr")
knitr::opts_chunk$set(echo = TRUE)
##Instalando os pacotes necessários.

### Instalando Pacotes ## macetinhos
lista.de.pacotes = c("tidyverse","lubridate","janitor","readxl","stringr","repmis", "readr", "ggplot2") # escreva a lista de pacotes
novos.pacotes <- lista.de.pacotes[!(lista.de.pacotes %in%
                                      installed.packages()[,"Package"])]
if(length(novos.pacotes) > 0) {install.packages(novos.pacotes)}
lapply(lista.de.pacotes, require, character.only=T)
rm(lista.de.pacotes,novos.pacotes)
gc()
```

<center>
## Análise de Dados de atendimentos ao sistema Consumidor.gov em relação ao segmento de mercado de Transporte Aéreo.
<br>
</center>

<p style="text-align: justify;">Mais informa??es podem ser obtidas no website do Consumidor.gov] (http:\\www.consumidor.gov.br) .</p> 

<center>![CONSUMIDOR.GOV](https://www.consumidor.gov.br/resources/imagens/logo-nova-900.png) </center>

<p style="text-align: justify;"> </p>

#### Carregando o arquivo em mémoria e depois vamos usar o bind e apagar os arquivos temporários
```{r, warning=FALSE}
##carregando em memoria
consumidorgov1 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2015_1.csv",head=TRUE, sep = ";")
consumidorgov2 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2015_2.csv",head=TRUE, sep = ";")
consumidorgov3 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2016_1.csv",head=TRUE, sep = ";")
consumidorgov4 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2016_2.csv",head=TRUE, sep = ";")
consumidorgov5 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2017_1.csv",head=TRUE, sep = ";")
consumidorgov6 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2017_2.csv",head=TRUE, sep = ";")
consumidorgov181 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-01.csv",head=TRUE, sep = ";")
consumidorgov182 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-02.csv",head=TRUE, sep = ";")
consumidorgov183 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-03.csv",head=TRUE, sep = ";")
consumidorgov184 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-04.csv",head=TRUE, sep = ";")
consumidorgov185 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-05.csv",head=TRUE, sep = ";")
consumidorgov186 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-06.csv",head=TRUE, sep = ";")
consumidorgov187 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-07.csv",head=TRUE, sep = ";")
consumidorgov188 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-08.csv",head=TRUE, sep = ";")
consumidorgov189 <- read.csv ("D:/ENAP_Especializacao/D6_Analise_de_dados/D6_ExercFinal_EricaJordana/dados_brutos/2018-09.csv",head=TRUE, sep = ";")
##Usando bind para agrupar todos os arquivos em um único arquivo.
consumidorgov <- bind_rows(consumidorgov1,consumidorgov2,consumidorgov3,consumidorgov4,consumidorgov5,consumidorgov6,consumidorgov181,consumidorgov182,consumidorgov183,consumidorgov184,consumidorgov185,consumidorgov186,consumidorgov187,consumidorgov188,consumidorgov189)

##removendo arquivos temporários
rm(consumidorgov1,consumidorgov2,consumidorgov3,consumidorgov4,consumidorgov5,consumidorgov6,consumidorgov181,consumidorgov182,consumidorgov183,consumidorgov184,consumidorgov185,consumidorgov186,consumidorgov187,consumidorgov188,consumidorgov189)

```

#### Apresentando informações de cabeçalho dos dados
```{r, warning=FALSE}
head(consumidorgov)

```
### A plataforma Consumidor.gov 

<p style="text-align: justify;">O <b>Consumidor.gov.br</b> É um serviço público que permite a interlocução direta entre consumidores e empresas para solução alternativa de conflitos de consumo pela internet.</p>

<p style="text-align: justify;">Ele não substitui o serviço prestado pelos órgãos de Defesa do Consumidor, que continuam atendendo os consumidores normalmente por meio de seus canais tradicionais de atendimento.</p>

<p style="text-align: justify;">A principal inovação do Consumidor.gov.br está em possibilitar uma interlocução direta entre consumidores e empresas, em um ambiente totalmente público e transparente, dispensada a intervenção do Poder Público na tratativa individual.</p>

<p style="text-align: justify;">Por se tratar de um serviço provido e mantido pelo Estado, com ênfase na interatividade entre consumidores e fornecedores para redução de conflitos de consumo, a participação de empresas voluntária e só é permitida aquelas que aderem formalmente ao servi?o, mediante assinatura de termo no qual se comprometem a conhecer, analisar e investir todos os esforços possíveis para a solução dos problemas apresentados. O consumidor, por sua vez, deve se identificar adequadamente e comprometer-se a apresentar todos os dados e informações relativas à reclamação relatada.</p>

####Limpando os dados das colunas usando o pacote janitor.
```{r, echo=TRUE}
consumidorgov <- consumidorgov %>% clean_names()
```

```{r, echo=TRUE}
colnames(consumidorgov)

names(consumidorgov)[10] <- "Area"
names(consumidorgov)[1] <- "Regiao"
```

#### Qual a proporção de problemas por segmento usando tydeverse
```{r}
consumidorgov %>% ggplot (aes (x = Area, colour = Area, fill = Area)) +
  theme_minimal() +
  geom_bar(stat = 'count') + 
  scale_y_continuous(name = "" , breaks = c(0,2e+05,4e+05),labels=c('0','200 mil','400 mil')) +
  labs(title = "Quantidade de Reclamações por Área") +
  theme(axis.text.x = element_blank()) +
  theme(plot.title = element_text(hjust = 0.5), plot.subtitle = element_text(hjust = 0.5))
```

#### Filter vamos trabalhar apenas com dados de Transporte Aéreo
```{r}
##consumidoraereo <- consumidorgov %>% filter(Segmento.de.Mercado == "Transporte Aéreo")
## rm(consumidorgov)
```

#### Pizza tipos de problema
```{r}
##(consumidoraereo %>% distinct(Grupo.Problema))
```

#### Pizza nome fantasia

#### Gráfico de barras tipo do problema

